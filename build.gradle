plugins {
    id 'org.springframework.boot' version '3.4.4'
    id 'io.spring.dependency-management' version '1.1.3'
    id 'java'
}

repositories {
    mavenCentral() // Maven Centralリポジトリを指定
}

dependencies {
    // 実行時に必要なライブラリ
    implementation 'org.springframework.boot:spring-boot-starter' // Spring Bootの基本依存関係
    implementation 'org.springframework.boot:spring-boot-starter-web' // Spring Webサーバー用依存関係
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf' // Thymeleafテンプレートエンジン

    // 開発時に必要なライブラリ
    developmentOnly("org.springframework.boot:spring-boot-devtools")
}

// JARファイルの作成
jar {
    manifest {
        attributes 'Main-Class': 'com.example.Application'
    }
}

// ホットリロード用のビルドタスク
// 継続監視でビルドを実行し続けるため、別タブでbootRunの実行が必要
tasks.register('hotReload') {
    group = 'application'
    description = 'ホットリロードでビルドを実行します'

    doLast {
        exec {
            commandLine 'gradle', 'build', '--continuous'
        }
    }
}